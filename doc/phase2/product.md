# Product.md

## What We Built
The main feature we built in P2 is the implementation for the SDC Form Filler use case [(PR)](https://github.com/csc302-fall-2020/proj-crunchycoders/pull/57). We also completed the integration of the client-side code for the SDC Form Manager code with the back-end. In P1, we had pages for uploading a form, displaying a form, and updating/deleting a form. In P2, we changed the styling for those pages, integrated them all into one service, and added new pages. The new pages include a dashboard for seeing all the forms that can be filled out and a page that allows the form to be filled and submitted. We also added functionality for things like dependent questions, parsing the XML files [(PR)](https://github.com/csc302-fall-2020/proj-crunchycoders/pull/42) and turning them into our object models, and saving previous versions of forms into the application. In addition, we did a styling and testing overhaul, enhancing the look of the front-end (all P1 and P2 pages) and added tests to the front-end to ensure it all works well [(PR)](https://github.com/csc302-fall-2020/proj-crunchycoders/pull/59).

## High-Level Design
Our application is a single node service with an express server serving a React front-end. We used CouchDB as our database and graphql as the interface for interacting with it. The application has different routes for accessing different pages like the main menu for the form manager, or the dashboard for the form filler.

## Technical Highlights
The biggest challenge we faced was Graphql’s insistence that we not put arbitrarily self-recursing data structures in our queries, which was terrible for us because our object model had types like ‘SDCQuestion’, which included sub questions that were also the ‘SDCQuestion’ type. After trying out some different ideas, we went with simply deconstructing the object into an array of top-level objects and then reconstructing the entire object model of an SDC Form client-side (The code for: [the making of the list](https://github.com/csc302-fall-2020/proj-crunchycoders/blob/master/server/src/database.ts#L137) and [the assembly](https://github.com/csc302-fall-2020/proj-crunchycoders/blob/master/server/src/database.ts#L137)). Another issue we had was that our code from P1 was limited and had to be heavily refactored to allow the functionality we put in for P2. In P1 we had multiple services (sdc-form-manager, sdc-form-filler, etc.), but since we found that we were reusing a lot of the form display code between services and all the services used the same database, we decided to refactor them all into a single front-end/back-end. In addition, there were quite a few bugs and snags with the parsing of the XML. Initially it all seemed to go well, but then we had issues like the XML multiple choice question lists not having any choices [(PR)](https://github.com/csc302-fall-2020/proj-crunchycoders/pull/56), or the “TextAfterResponse” fields in the XML showing up at different places, which had to be compensated for.

## Teamwork and Process
Our progress was smoother in P2 compared to P1 due to teammates already being familiar with the workflow and having some idea of what to get done. We set up and used the [Zenhub board](https://github.com/csc302-fall-2020/proj-crunchycoders#zenhub) for our tasks better after some guidance, and we made the task more granular into things that could be done in a single “after dinner work session”. This was helpful in defining exactly what people were doing and keeping track of the progress better. The snags included a few teammates leaving the project mid-way and the lack of time compared to the amount of work that was needed. First our teammate Muskan simply stopped communicating at all, and we have not heard from her for weeks now. Then two weeks into P2, Cherise left the course, leaving us with just 3 people total. After that, we had to triage and focus on the big stuff like form filling and dependent questions, and each one of us were working on a big chunk of the application generally on our own.
This is a screenshot of the Zenhub board showing various Epic issues and their granular tasks: 
![Image](https://i.imgur.com/v12xZep.png)

We also held a weekly meeting and had tasks defined for us individually each meeting in order to ensure everyone stayed on-track. This is an example of our weekly meeting notes:
```
Weekly Goals:
@Siyi (Cynthia) Complete and PR form filler functionality, and functionality for form display heirarchies
@Vidya Complete testing for form display and move to server side testing
@Amrit Add versioning fields to forms and add authentication
@teammate Next Meeting: Friday at 3pm
```

## Triage
For P2, we didn’t hit all of the goals that we set initially, given the various blockages and snags that hit us. We wanted to do authentication for the users and versioning for the forms, but decided to focus on the dependent questions and form filling functionality when left with only 3 people. However, the core of the application was completed and we have a basic working flow for form managers and form fillers. In P3, we want to round that out by adding some of the edge cases we missed (like the saving/publishing features for the form filler) and focus on deployment of the whole application. As for authentication or versioning, we’ll be prioritising adding the versioning and add authentication if there is time. We’ll be keeping the use-cases to what we have now (form manager and form filler), as there simply isn’t enough manpower to add more while adding features to what there currently is.
