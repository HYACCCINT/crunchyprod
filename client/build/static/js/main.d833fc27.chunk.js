(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{102:function(e,t,n){},104:function(e,t,n){},109:function(e,t,n){},112:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){"use strict";n.r(t);var r=n(10),s=n(0),i=n.n(s),c=n(59),a=n.n(c),o=(n(102),n(21)),u=n(31),l=n(25),d=n(44),j=n(58),p="\nquery($id: String!) {\n\tform(id: $id) {\n\t\t... on SDCForm {\n\t\t\tid,\n\t\t\tdocType,\n\t\t\tprocedureID,\n\t\t\tpatientID,\n\t\t\tlineage,\n\t\t\ttitle,\n\t\t\tsectionIDs,\n\t\t\turi,\n\t\t\tfooter,\n\t\t\tlastModified,\n\t\t\tarbitraryProperties,\n\t\t}\n\t\t... on SDCSection {\n\t\t\tid,\n\t\t\tdocType,\n\t\t\tname,\n\t\t\ttitle,\n\t\t\ttype,\n\t\t\tmustImplement,\n\t\t\tminCard,\n\t\t\tmaxCard,\n\t\t\tsubSectionIDs,\n\t\t\tsuperSectionID,\n\t\t\tarbitraryProperties,\n\t\t}\n\t\t... on SDCQuestion {\n\t\t\tid,\n\t\t\tdocType,\n\t\t\tname,\n\t\t\ttitle,\n\t\t\tmustImplement,\n\t\t\treadOnly,\n\t\t\tminCard,\n\t\t\tmaxCard,\n\t\t\tmaxSelections,\n\t\t\tquestionType,\n\t\t\tisEnabled,\n\t\t\tresponse {\n\t\t\t\tid,\n\t\t\t\tquestionID,\n\t\t\t\tresponseType,\n\t\t\t\tarbitraryProperties,\n\t\t\t\t... on SDCMultipleChoiceResponse {\n\t\t\t\t\tchoices,\n\t\t\t\t\tcanMultiSelect,\n\t\t\t\t\tuserInput: userInput,\n\t\t\t\t}\n\t\t\t\t... on SDCIntResponse {\n\t\t\t\t\tuserInput: userInput,\n\t\t\t\t\tdefaultNum: defaultValue,\n\t\t\t\t}\n\t\t\t\t... on SDCTextResponse {\n\t\t\t\t\tuserInput: userInput,\n\t\t\t\t\tdefaultText: defaultValue,\n\t\t\t\t}\n\t\t\t\t... on SDCDateResponse {\n\t\t\t\t\tuserInput: userInput,\n\t\t\t\t\tdefaultDate: defaultValue,\n\t\t\t\t}\n\t\t\t},\n\t\t\ttextAfterResponse,\n\t\t\tsuperSectionID,\n\t\t\tsuperQuestionID,\n\t\t\tsuperAnswerID,\n\t\t\tarbitraryProperties,\n\t\t}\n\t}\n}\n",b=Object(j.a)({url:"/graphql"}),f=n(18),h=Object(s.createContext)({});h.displayName="UserContext";var m=function(e){var t=e.children,n=Object(s.useState)({status:"pending",error:null,user:null}),i=Object(f.a)(n,2),c=i[0],a=i[1];return Object(s.useEffect)((function(){c.user?console.log(c,"qaq"):fetch("/api/cur-user",{credentials:"include"}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(e){return a({status:"success",error:null,user:e})})).catch((function(e){return a({status:"error",error:e,user:null})}))}),[]),console.log("user",c),Object(r.jsx)(h.Provider,{value:{state:c,setState:a},children:t})},O=n(17),x=n(29),v=n.n(x),g=n(41),y=n(156),I=n(159),D=(n(104),function(){var e=Object(o.e)(),t=Object(l.b)("\nmutation($id: String) {\n\tdeleteForm(id: $id) {\n\t\tid\n\t}\n}\n"),n=Object(f.a)(t,2)[1],i=Object(s.useState)(""),c=Object(f.a)(i,2),a=c[0],u=c[1],d=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,r,s,i=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S(a)){e.next=2;break}return e.abrupt("return");case 2:for(n=i.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=i[s];return e.next=5,t.apply(void 0,[a].concat(r));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var t=Object(g.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.push("/formdisplay/"+n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({id:t});case 2:e.sent.error?alert("Form deletion failed. There is no form for ID ".concat(t)):alert("Form ".concat(t," deleted!"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var t=Object(g.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.push("/upload-form/"+n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h={id:"FormID",labelText:"Form ID",onChange:function(e){u(e.target.value)}};return Object(r.jsx)("div",{className:"App",children:Object(r.jsxs)("div",{className:"mainWrap",children:[Object(r.jsxs)("div",{className:"displayDelete",children:[Object(r.jsx)(y.a,Object(O.a)({},h)),Object(r.jsx)(I.a,{id:"displayButton",kind:"tertiary",className:"menu-Button",onClick:function(){return d(j)},children:"Display Form"}),Object(r.jsx)(I.a,{id:"deleteButton",kind:"danger",className:"menu-Button",onClick:function(){return d(p)},children:"Delete Form"})]}),Object(r.jsxs)("div",{className:"uploadUpdate",children:[Object(r.jsx)(I.a,{id:"uploadButton",kind:"tertiary",className:"menu-Button",onClick:function(){return b("new")},children:"Upload Form"}),Object(r.jsx)(I.a,{id:"updateButton",kind:"tertiary",className:"menu-Button",onClick:function(){return b("update")},children:"Update Form"})]})]})})});function S(e){return null!==e&&""!==e}var C=n(32),N=n(82),w=n(157),k=n(149),T=n(158),F=n(150),P=n(160),E=function(e){var t=e.questionID,n=e.formArray,s=e.setFormArray,i=n.findIndex((function(e){return e.id==t})),c=n[i],a=Object(N.a)(n);if(null!=c.superQuestionID){var o=n.findIndex((function(e){return e.id==c.superQuestionID}));n[o].response.userInput==c.superAnswerID?c.isEnabled=!0:c.isEnabled=!1}var u={id:c.id,labelText:c.title,onChange:function(e){var t=n.findIndex((function(e){return e.id==c.id}));a[t].response.userInput=e.target.value,s(a)},disabled:null!=c.isEnabled&&!c.isEnabled,value:null!==c.response.userInput?c.response.userInput:"",helperText:c.name},l={id:c.id,labelText:c.title,onChange:function(e){var t=n.findIndex((function(e){return e.id==c.id}));a[t].response.userInput=e.target.value,s(a)},disabled:null!=c.isEnabled&&!c.isEnabled,value:null!==c.response.userInput?c.response.userInput:""},j={id:c.id,onChange:function(e){var t=n.findIndex((function(e){return e.id==c.id}));null===a[t].response.userInput&&(a[t].response.userInput=0),e.target.value?a[t].response.userInput=isNaN(parseInt(e.target.value))?a[t].response.userInput:parseInt(e.target.value):"Increment number"===e.target.title?a[t].response.userInput=parseInt(a[t].response.userInput)+1:"Decrement number"===e.target.title&&(a[t].response.userInput=parseInt(a[t].response.userInput)-1),s(a)},min:0,max:9999999,value:null!==c.response.userInput?c.response.userInput:0,step:1,disabled:null!=c.isEnabled&&!c.isEnabled,helperText:c.name},p={className:"radioWrap",onChange:function(e){var t=Object(N.a)(n),r=t.findIndex((function(e){return e.id==c.id}));t[r].response.userInput==e.target.value?t[r].response.userInput="":t[r].response.userInput=e.target.value,s(t)},name:c.name},b={className:"radioButton",disabled:null!=c.isEnabled&&!c.isEnabled,name:c.name};return"text"==c.questionType?Object(r.jsxs)("div",{className:"SDCQuestion",children:[c.mustImplement?"*":null,q(c),Object(r.jsx)(y.a,Object(O.a)({},u))]}):"date"==c.questionType?Object(r.jsxs)("div",{className:"SDCQuestion",children:[c.mustImplement?"*":null,q(c),Object(r.jsx)(w.a,{dateFormat:"m/d/Y",datePickerType:"simple",children:Object(r.jsx)(k.a,Object(O.a)({},l))}),c.textAfterResponse?c.textAfterResponse:""]}):"number"==c.questionType?Object(r.jsxs)("div",{className:"SDCQuestion",children:[c.mustImplement?"*":null,q(c),Object(r.jsx)(T.a,Object(O.a)({},j))]}):"single choice"==c.questionType?Object(r.jsx)("div",{className:"SDCQuestion",children:Object(r.jsxs)(F.a,{legendText:c.title?c.title:c.id,children:[" ",c.mustImplement?"*":null,q(c),Object(r.jsx)("div",Object(O.a)(Object(O.a)({},p),{},{children:c.response.choices.map((function(e){var t=e.title;if(c.response.arbitraryProperties&&0!==c.response.arbitraryProperties.length){var n,s=Object(d.a)(c.response.arbitraryProperties.map((function(e){return Object.entries(e)})));try{for(s.s();!(n=s.n()).done;){var i=Object(f.a)(n.value,1),a=Object(f.a)(i[0],2),o=a[0],u=a[1];Array.isArray(u)&&u.length===c.response.choices.length&&(t=t+", "+JSON.stringify(o)+": "+JSON.stringify(u[c.response.choices.indexOf(e)]))}}catch(l){s.e(l)}finally{s.f()}}return Object(r.jsx)(P.a,Object(O.a)(Object(O.a)({value:e.ID,labelText:t},b),{},{defaultChecked:c.response.userInput==e.ID}),e.name)}))}))]})}):null},q=function(e){return Object(r.jsx)("div",{children:e.arbitraryProperties?e.arbitraryProperties.map((function(e){return e?Object(r.jsx)("div",{className:"arbitraryQuestionProperties",children:Object.entries(e).map((function(e){return Object(r.jsxs)("h6",{className:"arbitraryQuestionProperty",children:[JSON.stringify(e[0]),": ",JSON.stringify(e[1])]})}))}):""})):""})},Q=n(151),A=(n(84),function(){var e=Object(o.f)().procedureId,t=Object(s.useState)([]),n=Object(f.a)(t,2),i=n[0],c=n[1],a=Object(s.useState)({id:e}),u=Object(f.a)(a,1)[0],d=Object(l.c)({query:p,variables:u}),j=Object(f.a)(d,1)[0],b=j.data,h=j.fetching;j.error;if(h)return Object(r.jsx)("p",{children:"Loading..."});0==i.length&&b.form.map((function(e){delete e.__typename,i.push(e)}));var m=function e(t){return Object(r.jsx)("div",{children:t.map((function(t){return Object(r.jsxs)("div",{children:[Object(r.jsx)(E,{questionID:t.id,formArray:i,setFormArray:c}),t.subQuestions?e(t.subQuestions):null]})}))})},O=function e(t,n){var r=n.find((function(e){return"SDCSection"===e.docType&&e.id===t})),s=r.subSectionIDs,i=Object(C.a)(r,["subSectionIDs"]);i.subSections=[],s.forEach((function(t){return i.subSections.push(e(t,n))}));var c=n.filter((function(e){return"SDCQuestion"===e.docType&&e.superSectionID===t}));return i.questions=[],c.forEach((function(e){return i.questions.push(x(e,n))})),i},x=function(e,t){var n=t.filter((function(t){return"SDCQuestion"===t.docType&&t.superQuestionID===e.id}));return e.subQuestions=n,e},v=function(e){if(!e)return{};var t=e[0],n=t.sectionIDs,r=Object(C.a)(t,["sectionIDs"]);return r.sections=[],n.forEach((function(t){return r.sections.push(O(t,e))})),r}(i);return Object(r.jsxs)("div",{className:"fillerWrap",children:[Object(r.jsxs)("div",{className:"fillerHead",children:[Object(r.jsx)("h3",{children:v.formID}),Object(r.jsx)("h3",{children:v.name}),function(e,t){return Object(r.jsxs)("div",{className:"fillerProperties",children:[Object(r.jsxs)("h5",{children:["Title: ",e.title]}),Object(r.jsxs)("h6",{children:["Version: ",e.lastModified]}),Object(r.jsxs)("h6",{children:["Lineage: ",e.lineage]}),"template"!==e.patientID?Object(r.jsxs)("h5",{children:["Patient: ",e.patientID]}):null,t?t.map((function(e){return e?Object(r.jsx)("div",{className:"arbitraryFormProperties",children:Object.entries(e).map((function(e){return Object(r.jsxs)("h6",{className:"arbitraryFormProperty",children:[JSON.stringify(e[0]),": ",JSON.stringify(e[1])]})}))}):""})):""]})}(v,v.arbitraryProperties)]}),Object(r.jsxs)(Q.a,{className:"fillerForm",children:[Object(r.jsx)("br",{}),function e(t){return t?Object(r.jsx)("div",{className:"sectionWrap",children:t.map((function(t){return null===t?null:Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{className:"sectionTitle",children:["Section ",t.name,": ",t.title]}),t.mustImplement?Object(r.jsx)("p",{children:"* Must Complete this section"}):null,m(t.questions),e(t.subSections)]})}))}):null}(v.sections),Object(r.jsx)("br",{})]}),Object(r.jsxs)("p",{className:"footer",children:["Footer: ",v.footer]})]})}),$=function(){var e=Object(o.f)().action,t=Object(l.b)("\nmutation($id: String, $input: FormXMLInput) {\n\tuploadForm(id: $id, input: $input) {\n\t\tid,\n\t\txml\n\t}\n}\n"),n=Object(f.a)(t,2)[1],i=Object(s.useState)({id:"",title:"",name:"",procedureID:""}),c=Object(f.a)(i,2),a=c[0],u=c[1],d=Object(s.useState)({fileName:"",contents:""}),j=Object(f.a)(d,2),p=j[0],b=j[1],h=function(){var e=Object(g.a)(v.a.mark((function e(t){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.files[0],n.text().then((function(e){return e})),e.next=5,n.text();case 5:r=e.sent,b({fileName:n.name,contents:r});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m={id:"FormID",labelText:"Form ID",onChange:function(e){var t=e.currentTarget.value;u({id:t,procedureID:t})}};return Object(r.jsxs)("div",{className:"update-form-container",children:[Object(r.jsxs)("h1",{children:["new"===e?"Upload":"Update"," a Form"]}),Object(r.jsxs)("form",{id:"FormUpdate",onSubmit:function(t){t.preventDefault();var r=Object(O.a)({},a);return r={id:a.id,input:{id:a.id,xml:p.contents}},u(r),n(r),alert("Form was ".concat("new"===e?"uploaded":"updated"," with title: ").concat(p.fileName," and procedure ID: ").concat(a.procedureID)),!1},children:[Object(r.jsx)(y.a,Object(O.a)({},m)),Object(r.jsxs)("label",{children:["File:",Object(r.jsx)("input",{type:"file",onChange:h})]}),Object(r.jsx)(I.a,{type:"submit",kind:"tertiary",children:"Submit"})]})]})},M=n(152),B=n(155),L=n(76),U=n(74),W=n(77),J=n(79),R=n(78),V=n(75),H=n(38),_=(n(109),function(){var e=Object(o.e)(),t=Object(s.useState)(""),n=Object(f.a)(t,2),i=n[0],c=n[1],a=Object(l.c)({query:"\n{\n\tforms {\n        id,\n        docType,\n        procedureID,\n        patientID,\n        lineage,\n        title,\n        lastModified\n\t}\n}\n"}),u=Object(f.a)(a,1)[0],d={id:"searchForm",labelText:"Procedure ID",onChange:function(e){return c(e.target.value)}},j=u.data?u.data.forms.map((function(e){return{id:e.id,procedureID:e.procedureID,lastm:e.lastModified}})):[];return Object(r.jsxs)("div",{className:"dashBoard",children:[Object(r.jsx)("div",{className:"searchWrap",children:Object(r.jsx)(M.a,Object(O.a)({},d))}),Object(r.jsx)("div",{className:"tableWrap",children:Object(r.jsx)(B.a,{rows:""==i?j:j.filter((function(e){return e.procedureID.includes(i)||e.id.includes(i)})),headers:[{key:"id",header:"ID"},{key:"procedureID",header:"Procedure ID"},{key:"lastm",header:"Last Modifed"}],children:function(t){var n=t.rows,s=t.headers;return Object(r.jsx)(L.a,{title:"SDCForms",description:"Procedure",children:Object(r.jsxs)(U.a,{children:[Object(r.jsx)(W.a,{children:Object(r.jsxs)(J.a,{children:[s.map((function(e){return Object(r.jsx)(R.a,{children:e.header},e.key)})),Object(r.jsx)(R.a,{})]})}),Object(r.jsx)(V.a,{children:n.map((function(t){return Object(r.jsx)(J.a,{children:t.cells.map((function(n){return Object(r.jsx)(H.a,{onClick:function(){return e.push("/formfill/"+t.id)},children:n.value},n.id)}))},t.id)}))})]})})}})})]})}),G=function(){var e=Object(o.f)().formID,t=Object(s.useState)(0),n=Object(f.a)(t,2),i=n[0],c=n[1],a=Object(l.b)("\nmutation($id: String, $input: UserResponse) {\n\tupdateRes(id: $id, input: $input) {\n\t\tid\n\t}\n}\n"),u=Object(f.a)(a,2)[1],j=Object(s.useState)([]),b=Object(f.a)(j,2),h=b[0],m=b[1],x=Object(s.useState)({id:e}),v=Object(f.a)(x,1)[0],g=Object(l.c)({query:p,variables:v}),D=Object(f.a)(g,1)[0],S=D.data,N=D.fetching;D.error;if(N)return Object(r.jsx)("p",{children:"Loading..."});0==h.length&&S.form.map((function(e){delete e.__typename,h.push(e)}));var w=function e(t){return Object(r.jsx)("div",{children:t.map((function(t){return Object(r.jsxs)("div",{children:[Object(r.jsx)(E,{questionID:t.id,formArray:h,setFormArray:m}),t.subQuestions?e(t.subQuestions):null]})}))})},k=function e(t,n){var r=n.find((function(e){return"SDCSection"===e.docType&&e.id===t})),s=r.subSectionIDs,i=Object(C.a)(r,["subSectionIDs"]);i.subSections=[],s.forEach((function(t){return i.subSections.push(e(t,n))}));var c=n.filter((function(e){return"SDCQuestion"===e.docType&&e.superSectionID===t}));return i.questions=[],c.forEach((function(e){return i.questions.push(T(e,n))})),i},T=function(e,t){var n=t.filter((function(t){return"SDCQuestion"===t.docType&&t.superQuestionID===e.id}));return e.subQuestions=n,e},F=function(e){if(!e)return{};var t=e[0],n=t.sectionIDs,r=Object(C.a)(t,["sectionIDs"]);return r.sections=[],n.forEach((function(t){return r.sections.push(k(t,e))})),r}(h),P={id:"patientID",labelText:"Patient ID",onChange:function(e){c(e.target.value),h.find((function(e){return"SDCForm"===e.docType})).patientID=e.target.value},helperText:"Enter Patient ID",value:"template"===h.find((function(e){return"SDCForm"===e.docType})).patientID?"":h.find((function(e){return"SDCForm"===e.docType})).patientID},q=function(){var e=0;""==i?(alert("Please enter the Patient ID"),e=1):e=0;var t,n=Object(d.a)(h);try{e:for(n.s();!(t=n.n()).done;){var r=t.value;if("SDCQuestion"===r.docType&&!1!==r.mustImplement&&!1!==r.isEnabled)if("text"===r.questionType){if(""===r.response.userInput){alert("Please fill in the answer for Question: ".concat(r.title.slice(0,-1))),e=1;break e}e=0}else if("single choice"===r.questionType){if(0==r.response.userInput.length){alert("Please fill in the answer for Question: ".concat(r.title.slice(0,-1))),e=1;break e}e=0}else{if(null===r.response){alert("Please fill in the answer for Question: ".concat(r.title.slice(0,-1))),e=1;break e}e=0}}}catch(a){n.e(a)}finally{n.f()}if(0===e){var s=Date.now(),c="".concat(F.id,"-").concat(i,"-").concat(s.toString());F.id=c,u({id:c,input:h}),console.log("This is the response: ",h)}};return Object(r.jsxs)("div",{className:"fillerWrap",children:[Object(r.jsxs)("div",{className:"fillerHead",children:[Object(r.jsx)("h3",{children:F.formID}),Object(r.jsx)("h3",{children:F.name}),function(e,t){return Object(r.jsxs)("div",{className:"fillerProperties",children:[Object(r.jsxs)("h5",{children:["Title: ",e.title]}),Object(r.jsxs)("h6",{children:["Version: ",e.lastModified]}),Object(r.jsxs)("h6",{children:["Lineage: ",e.lineage]}),"template"!==e.patientID?Object(r.jsxs)("h5",{children:["Patient: ",e.patientID]}):null,t?t.map((function(e){return e?Object(r.jsx)("div",{className:"arbitraryFormProperties",children:Object.entries(e).map((function(e){return Object(r.jsxs)("h6",{className:"arbitraryFormProperty",children:[JSON.stringify(e[0]),": ",JSON.stringify(e[1])]})}))}):""})):""]})}(F,F.arbitraryProperties),Object(r.jsx)(y.a,Object(O.a)({},P))]}),Object(r.jsxs)(Q.a,{onSubmit:q,className:"fillerForm",children:[Object(r.jsx)("br",{}),function e(t){return t?Object(r.jsx)("div",{className:"sectionWrap",children:t.map((function(t){return null===t?null:Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{className:"sectionTitle",children:["Section ",t.name,": ",t.title]}),t.mustImplement?Object(r.jsx)("p",{children:"* Must Complete this section"}):null,w(t.questions),e(t.subSections)]})}))}):null}(F.sections),Object(r.jsx)("br",{}),Object(r.jsx)(I.a,{onClick:q,children:"Submit"})]}),Object(r.jsxs)("p",{className:"footer",children:["Footer: ",F.footer]})]})},Y=n(65),K=n(66),X=n(68),z=n(67),Z=(n(85),function(){var e=Object(o.e)();return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"notFound",children:Object(r.jsxs)("div",{style:{textAlign:"left"},children:[Object(r.jsx)("h3",{children:"404: Not found"}),Object(r.jsxs)("p",{style:{marginTop:"0.5em"},children:["This page does not exist, click  ",Object(r.jsx)("strong",{children:"Go back"}),Object(r.jsx)("br",{})," to return."]}),Object(r.jsx)(I.a,{style:{marginTop:"1rem"},onClick:function(){return e.goBack()},children:"Go back"})]})})})});var ee,te,ne=(ee=function(e,t){return t?Object(r.jsx)(Z,{}):Object(r.jsx)(r.Fragment,{children:e.children})},function(e){Object(X.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(Y.a)(this,n);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={error:void 0},e}return Object(K.a)(n,[{key:"componentDidCatch",value:function(e,t){te&&te(e,t)}},{key:"render",value:function(){return ee(this.props,this.state.error)}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),n}(i.a.Component)),re=(n(112),function(){var e=Object(o.e)(),t=Object(s.useContext)(h),n=Object(s.useState)(""),i=Object(f.a)(n,2),c=i[0],a=i[1],u=Object(s.useState)(""),d=Object(f.a)(u,2),j=d[0],p=d[1],b=Object(l.c)({query:"\nquery($id: String, $password: String) {\n\tuser(id: $id, password: $password) {\n\t\tid,\n\t\tpassword,\n\t\tpermissions\n\t}\n}",pause:!0,variables:{id:c,password:j}}),m=Object(f.a)(b,2),x=m[0],v=m[1],g=x.data,D=x.fetching;x.error;!D&&g&&g.user&&(t.setState({status:"success",error:null,user:g.user}),e.push("/manage"));var S={id:"username",labelText:"User Name",onChange:function(e){a(e.target.value)}},C={id:"password",labelText:"Password",onChange:function(e){p(e.target.value)}},N=function(n){return fetch("/api/".concat(n,"-guest-login")).then((function(n){if(!n.ok)throw new Error(n.statusText);n.json().then((function(n){return t.setState({status:"success",error:null,user:n.user}),e.push(n.url),n}))}))};return console.log("user",t.state),Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:"mainWrap",children:[Object(r.jsx)("h1",{children:"Login"}),Object(r.jsxs)("div",{className:"loginreg",children:[Object(r.jsx)(y.a,Object(O.a)({},S)),Object(r.jsx)(y.a,Object(O.a)({},C)),Object(r.jsx)(I.a,{id:"loginbtn",kind:"primary",className:"menu-Button",onClick:function(){v(),console.log("click")},children:"Login"})]}),Object(r.jsxs)("div",{className:"guest",children:[Object(r.jsx)("p",{children:"Or..."}),Object(r.jsx)(I.a,{id:"fillerbtn",kind:"secondary",onClick:function(){N("filler")},children:"Log in as Filler guest"}),Object(r.jsx)(I.a,{id:"managebtn",kind:"secondary",onClick:function(){N("manager")},children:"Log in as Manager guest"})]})]})})});var se=n(153),ie=n(161),ce=n(154),ae=function(e){var t=e.component,n=e.isAuthenticated,i=e.noAuthComponent,c=Object(C.a)(e,["component","isAuthenticated","noAuthComponent"]),a=Object(s.useContext)(h),u=Object(o.e)(),l=function(){var e=Object(s.useContext)(h),t="pending"===e.state.status,n="error"===e.state.status,r="success"===e.state.status,i=e.state.user&&r;return Object(O.a)(Object(O.a)({},e.state),{},{isPending:t,isError:n,isSuccess:r,isAuthenticated:i})}(),d=function(e){return fetch("/api/".concat(e,"-guest-login")).then((function(e){if(!e.ok)throw new Error(e.statusText);e.json().then((function(e){return console.log(e,"dfsdfs"),a.setState({status:"success",error:null,user:e.user}),u.push(e.url),e}))}))},j=function(){return window.localStorage.setItem("redirectUrl",window.location.href),Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:"noAuth",children:[Object(r.jsx)("h1",{children:"SDC Forms"}),Object(r.jsx)("p",{style:{marginTop:"0.5em"},children:"You don't have access to this page, try..."}),Object(r.jsx)("div",{children:Object(r.jsx)(I.a,{style:{marginTop:"2em",marginBottom:"1em"},onClick:function(){return u.push("/")},children:"Log in to get started"})}),Object(r.jsxs)("div",{className:"guest",children:[Object(r.jsx)("p",{children:"Or..."}),Object(r.jsx)(I.a,{id:"fillbtn",kind:"secondary",onClick:function(){d("filler")},children:"Log in as Filler guest"}),Object(r.jsx)(I.a,{id:"mngbtn",kind:"secondary",onClick:function(){d("manager")},children:"Log in as Manager guest"})]})]})})};i&&(j=i);return Object(r.jsx)(o.a,Object(O.a)(Object(O.a)({},c),{},{render:function(e){return n?n({auth:l})?Object(r.jsx)(t,Object(O.a)(Object(O.a)({},e),c)):Object(r.jsx)(j,{}):(s=l.user)&&(c.path.includes("manage")||c.path.includes("upload-form")||c.path.includes("formdisplay")?s.permissions.includes("manage"):c.path.includes("formfill")||c.path.includes("fill")?s.permissions.includes("fill"):void 0)?Object(r.jsx)(t,Object(O.a)(Object(O.a)({},e),c)):Object(r.jsx)(j,{});var s}}))},oe=n(93),ue=function(e){Object(X.a)(n,e);var t=Object(z.a)(n);function n(){return Object(Y.a)(this,n),t.apply(this,arguments)}return Object(K.a)(n,[{key:"render",value:function(){var e=this.props,t=e.history,n=e.to,s=(e.staticContext,Object(C.a)(e,["history","to","staticContext"]));return Object(r.jsx)(oe.HeaderMenuItem,Object(O.a)({onClick:function(){return t.push(n)},onKeyDown:function(e){"Enter"===e.key&&t.push(n)}},s))}}]),n}(s.Component),le=Object(o.g)(ue),de=Object(s.forwardRef)((function(e,t){return Object(r.jsx)(le,Object(O.a)({},e))}));de.displayName="HeaderMenuItemLink";n(141);var je=function(){var e=Object(o.e)();return Object(r.jsx)(u.a,{children:Object(r.jsx)(ne,{children:Object(r.jsx)(m,{children:Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(o.a,{path:"/after-login",component:function(){var e=window.localStorage.getItem("redirectUrl");return window.localStorage.removeItem("redirectUrl"),window.location.href=e||"/",null}}),Object(r.jsxs)(l.a,{value:b,children:[Object(r.jsxs)(se.a,{"aria-label":"Crunchy coders",children:[Object(r.jsx)(ie.a,{href:"#",prefix:"SDC",children:"[Forms]"}),Object(r.jsxs)(ce.a,{"aria-label":"Crunchy",children:[Object(r.jsx)(de,{history:e,to:"/manage",children:"Manage"}),Object(r.jsx)(de,{history:e,to:"/fill",children:"Fill"})]})]}),Object(r.jsx)(o.a,{path:"/",component:re,exact:!0}),Object(r.jsx)(ae,{path:"/manage",component:D,exact:!0}),Object(r.jsx)(ae,{path:"/upload-form/:action",component:$,exact:!0}),Object(r.jsx)(ae,{path:"/formdisplay/:procedureId",component:A,exact:!0}),Object(r.jsx)(ae,{path:"/formfill/:formID",component:G}),Object(r.jsx)(ae,{path:"/fill",component:_,exact:!0})]})]})})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe;pe=je,a.a.render(Object(r.jsx)(pe,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},84:function(e,t,n){},85:function(e,t,n){}},[[142,1,2]]]);
//# sourceMappingURL=main.d833fc27.chunk.js.map